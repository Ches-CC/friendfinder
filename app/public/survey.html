<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>F-FINDER</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </head>
  <body class="bg-secondary text-body">
    <div class="jumbotron text-center">
      <h1>Fill Out the Following Survey!</h1>
      <h2>It's so you can make new friends!</h2>
      <h3>It's totally NOT for us to Sell Your Personal Information!</h3>
    </div>
    <div class="container">
      <!--NAME-->
      <h4>Name (Required)</h4>
      <input
        type="text"
        id="name"
        style="width: 600px;"
        class="form-control"
        required
      />
      <br />
      <!--Photo Upload via URL-->
      <h4>Link to Photo Image (Required)</h4>
      <input
        type="text"
        id="photo"
        style="width: 600px;"
        class="form-control"
        required
      />
      <hr />
      <hr />
      <h2><strong>Question One</strong></h2>
      <h2>You believe "Y'all" is a totally legitimate contraction.</h2>
      <form style="width: 200px;">
        <select name="question-one" id="q1" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Two</strong></h2>
      <h2>You think sharting is no big deal, happens to the best of us.</h2>
      <form style="width: 200px;">
        <select name="question-two" id="q2" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Three</strong></h2>
      <h2>
        It's fine that Luke & Leia kissed because they didn't know they were
        siblings.
      </h2>
      <form style="width: 200px;">
        <select name="question-three" id="q3" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Four</strong></h2>
      <h2>You're disgusted by the texture of the tapioca balls in boba tea.</h2>
      <form style="width: 200px;">
        <select name="question-four" id="q4" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Five</strong></h2>
      <h2>Wearing all-black all-the-time is fine, right?</h2>
      <form style="width: 200px;">
        <select name="question-five" id="q5" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Six</strong></h2>
      <h2>
        Humans should be allowed to wear yoga pants anytime they feel like it.
      </h2>
      <form style="width: 200px;">
        <select name="question-six" id="q6" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Seven</strong></h2>
      <h2>Disc Golf is a game, not a sport.</h2>
      <form style="width: 200px;">
        <select name="question-seven" id="q7" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Eight</strong></h2>
      <h2>Webbed fingers/toes are actually awesome.</h2>
      <form style="width: 200px;">
        <select name="question-eight" id="q8" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Nine</strong></h2>
      <h2>Online Trolls should be punished IRL.</h2>
      <form style="width: 200px;">
        <select name="question-nine" id="q9" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <hr />
      <h2><strong>Question Ten</strong></h2>
      <h2>"Aliens" was better than "Alien".</h2>
      <form style="width: 200px;">
        <select name="question-ten" id="q10" class="custom-select">
          <option selected>Select One</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
      <br />
      <button class="btn btn-primary btn-block" data-toggle="modal" id="submit" type="submit">
        Submit
      </button>
    </div>
    <!--Modalo Especial-->
    <div id="results-modal" class="modal modal-dialog fade" role="dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"></button>
          <h2 class="modal-title">
            <strong>Your New BFF!!</strong>
          </h2>
          <div class="modal-body">
            <h2 id="match-name"></h2>
            <img id="match-img" src="" alt="">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <br>
    <div id="friend-match"></div>
  
</div>


  <!--Las Scriptos de Java-->
  
  <!--Capture User's Input-->
    <script type="text/javascript">
    
      $("#submit").on("click", function(event) {
        event.preventDefault();

        //Form Validation
        function validateForm() {
          var isValid = true;
          $(".form-control").each(function() {
            if ($(this).val() === "") {
            isValid = false;
          }
          });
          $(".custom-select").each(function() {
            if ($(this).val() === "Select One") {
              isValid = false;
            }
          });
          return isValid;
        }
        
        if (validateForm()) {
          var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [
              $("#q1").val(),
              $("#q2").val(),
              $("#q3").val(),
              $("#q4").val(),
              $("#q5").val(),
              $("#q6").val(),
              $("#q7").val(),
              $("#q8").val(),
              $("#q9").val(),
              $("#q10").val()
            ]
          };

          $.post("/api/friends", userData, function(data) {
            console.log("User Data: " + userData);
            console.log("Match Name: " + data.matchingName)
            //MODALO!
            $("#match-name").text(data.matchingName);
            $("#match-img").attr("src", data.matchingPhoto);

            $("#results-modal").modal("show");
          });

          

        }else{
          alert("Oops, looks like you forgot to answer a question! \nPlease go back and answer all questions!!");
        } 
      });
    </script>
  </body>
</html>
